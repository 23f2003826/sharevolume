<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Loading...</title><link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"></head><body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 font-sans"><div class="bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full"><h1 class="text-3xl font-bold mb-6 text-center text-gray-800" id="share-entity-name">Loading...</h1><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-green-50 p-6 rounded-lg shadow-sm flex flex-col justify-between"><h2 class="text-xl font-semibold mb-2 text-green-700">Highest Shares Outstanding</h2><p class="text-gray-700 text-lg">Value: <span class="font-bold text-green-800" id="share-max-value">Loading...</span></p><p class="text-gray-600 text-sm">Fiscal Year: <span class="font-bold text-green-800" id="share-max-fy">Loading...</span></p></div><div class="bg-red-50 p-6 rounded-lg shadow-sm flex flex-col justify-between"><h2 class="text-xl font-semibold mb-2 text-red-700">Lowest Shares Outstanding</h2><p class="text-gray-700 text-lg">Value: <span class="font-bold text-red-800" id="share-min-value">Loading...</span></p><p class="text-gray-600 text-sm">Fiscal Year: <span class="font-bold text-red-800" id="share-min-fy">Loading...</span></p></div></div><div class="mt-8 text-center text-gray-500 text-sm"><p>Data provided by <a href="https://www.sec.gov/" target="_blank" class="text-blue-500 hover:underline">SEC EDGAR</a>.</p><p class="mt-2">Default CIK: 0000820027 (Ameriprise Financial)</p><p>You can specify a CIK using the URL parameter, e.g., <span class="font-mono bg-gray-200 px-1 py-0.5 rounded text-xs">index.html?CIK=0001018724</span></p></div></div><script>const initialData = {"entityName":"Ameriprise Financial","max":{"val":113032549,"fy":2021},"min":{"val":102148118,"fy":2023}};// Function to update DOM elementsfunction updateDOM(data) {document.title = `${data.entityName} Shares Outstanding`;document.getElementById('share-entity-name').textContent = `${data.entityName} Shares Outstanding`;document.getElementById('share-max-value').textContent = (typeof data.max.val === 'number' ? data.max.val.toLocaleString() : data.max.val);document.getElementById('share-max-fy').textContent = data.max.fy;document.getElementById('share-min-value').textContent = (typeof data.min.val === 'number' ? data.min.val.toLocaleString() : data.min.val);document.getElementById('share-min-fy').textContent = data.min.fy;}// Function to fetch and process data from SECasync function fetchAndProcessData(cik) {const secApiUrl = `https://data.sec.gov/api/xbrl/companyconcept/CIK${cik}/dei/EntityCommonStockSharesOutstanding.json`;const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(secApiUrl)}`;try {const response = await fetch(proxyUrl, {headers: {'User-Agent': 'MyFinancialApp your.email@example.com' // SEC requires a descriptive User-Agent, though may be overridden by proxy/browser}}});if (!response.ok) {throw new Error(`HTTP error! Status: ${response.status}`);}const data = await response.json();const secData = JSON.parse(data.contents);const shares = secData.units.shares;const filtered = shares.filter(s => parseInt(s.fy) > 2020 && typeof s.val === 'number');if (filtered.length === 0) {console.warn(`No shares data found for CIK ${cik} with fy > 2020.`);return {entityName: `CIK ${cik} (No data > 2020)`,max: { val: 'N/A', fy: 'N/A' },min: { val: 'N/A', fy: 'N/A' }};}let max = { val: -Infinity, fy: null };let min = { val: Infinity, fy: null };filtered.forEach(item => {if (item.val > max.val) {max = { val: item.val, fy: item.fy };}if (item.val < min.val) {min = { val: item.val, fy: item.fy };}});return {entityName: secData.entityName,max: max,min: min};} catch (error) {console.error("Failed to fetch or process data:", error);return {entityName: `Error loading CIK ${cik}`,max: { val: 'N/A', fy: 'N/A' },min: { val: 'N/A', fy: 'N/A' }};}}// Main logic on page loaddocument.addEventListener('DOMContentLoaded', async () => {const urlParams = new URLSearchParams(window.location.search);const cikParam = urlParams.get('CIK');if (cikParam) {const dynamicData = await fetchAndProcessData(cikParam);updateDOM(dynamicData);} else {updateDOM(initialData);}});</script></body></html>